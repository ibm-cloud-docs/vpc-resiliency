---

copyright:
  years: 2023
lastupdated: "2023-11-28"

subcollection: whitepaper-vpc-resiliency

keywords:

---

# Disaster recovery design decisions
{: #disaster-recovery-design}

A disaster recovery solution includes provisioning of infrastructure and required platform and compute services in the recovery site, replicating or backing up data and configuration to the recovery site, and application fail over to the recovery site. The recovery site is typically located in a geographically different location to provide protection from natural disasters or outages impacting an entire geographic region. Business continuity policies and regulatory compliance requirements might impose specific distance, country, or geo restrictions for the recovery site.

A disaster recovery solution needs to consider the application’s high availability, business RPO/RTO requirements, and DR site location requirements for regulatory compliance.

## Disaster recovery approaches
{: #disaster-recovery-approach}

Disaster Recovery approaches can be summarized as follows:

### Backup & Restore (Cold DR Site)
{: #backup-restore-dr}

The backup and restore approach centers around the consistent and periodic creation of copies of essential data and system configurations. These backups serve as point-in-time snapshots of the data, capturing the last known consistent state of the information that can be used for recovery purposes. The backups must be stored in a separate location from the primary site to enable recovery in the event of unplanned outages affecting the primary site. Recovery process requires using backups to provision infrastructure and build the application in the recovery site and to restore the data. Thus, the recovery site is considered a Cold DR site. Depending on the backup frequency and retention policy, the restoration process can return the application to its state before the incident occurred. The time required to restore the data and the amount of data that could potentially be lost between backups (RPO) may impact the speed and completeness of the recovery process. Therefore, this approach is recommended for environments or workloads that can tolerate high recovery times (RTO), e.g. for dev/test environments or low priority workloads.

### Active/Standby (Hot or Warm DR Site)
{: #active-standby-dr}

In the Active/Standby approach, the application stack is deployed in both the primary and the standby site. The standby site may have equal or fewer services and resources compared to the primary site. User's transactions are served by the primary site only. Application data, metadata, configuration data, and security data are replicated to the standby site. A global load balancer or DNS changes are used to re-route all client transactions to the standby site when the primary site becomes unavailable. When the standby site is identical to the primary site, it is considered a Hot DR site and the RTO can be low (in the range of minutes to hours). To reduce cost, the standby site might be configured with minimum capacity and autoscaling enabled to dynamically adjust the compute resources based on the load. This is considered a warm DR site and the recovery time (RTO) might be higher (in the range of hours) compared to a hot DR site.

### Active/Active
{: #active-active-dr}

In the Active/Active approach the application stack is deployed in both the primary and the secondary site. The application is active in both the primary and the secondary sites and user’s transactions can be handled by the application in any of the sites. Application data, metadata, configuration data, and security data are replicated to the secondary site. A global load balancer distributes requests across the two sites. With this approach, it is possible to achieve near zero RPO and RTO. This is the costliest approach and most complex from an application design perspective. It is recommended for critical applications that require continuous availability and near zero RPO/RTO.

The following table summarizes the main Disaster Recovery approaches and recommended use.

| **DR Approach**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **RPO (data loss)** **RTO (data recovery)**                                  | **Cost** | **Recommended Use**                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|----------|----------------------------------------------------------------------------------------------------------------|
| **Backup and Restore (Cold DR Site)** -Regular data backups available in DR site  -Infrastructure and app are deployed on demand in DR site upon outage / unavailability of primary site -App and data restored from backups                                                                                                                                                                                                                                                 | RPO: Med/High (based on backup frequency) RTO: High (hours to days)          | Low      | - Dev/test environments - Low priority workloads                                                               |
| **Active-Standby (Warm or Hot DR Site)** - Application deployed in primary and standby site  - User transactions handled by primary site - Data replicated to standby site - Client transactions re-routed to standby site when primary site is unavailable **Warm DR Site** - Minimum compute capacity deployed at standby site and scaled on demand upon outage/unavailability of primary site  **Hot DR Site** - Infrastructure and app fully deployed in standby site.   | **Warm DR Site** RPO: Low (data replication) RTO: Medium (minutes to hours)  | Medium   | Core business applications with  - medium to high availability requirements  - RPO \< 1 hour - RTO \< 4 hours  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Hot DR Site** RPO: Low (data replication) RTO: Low (minutes)               | High     | Core business applications with  - High availability requirements  - RPO \< 15 mins - RTO \< 1 hour            |
| **Active-Active** - Infrastructure and application fully deployed in primary and secondary sites  - User transactions can be handled by application in primary or secondary site - Data replicated to secondary site                                                                                                                                                                                                                                                         | RPO: near zero RTO: near zero                                                | High     | Mission critical applications with  - continuous availability requirements - RPO/RTO near zero                 |
{: caption="Table 1. Disaster recovery approaches" caption-side="bottom"}

DR approaches can be combined with high-availability deployment options to meet availability and Disaster Recovery objectives for enterprise workloads. The following provides a comparison of the High Availability and Disaster Recovery options.

| **HA/DR** **Deployment** | **Single-Zone** **Single Region** | **Multi-Zone** **Single Region** | **Multi-Zone** **Multi-Region** |                    |                   |            |
|--------------------------|-----------------------------------|----------------------------------|---------------------------------|--------------------|-------------------|------------|
|                          |                                   |                                  | **Backup & R** **Cold DR Site** | **Active-Standby** | **Active-Active** |            |
|                          |                                   |                                  |                                 | **Warm DR Site**   | **Hot DR Site**   |            |
| **Availability**         | Low                               | Medium/High1                     | Medium/High                     | High               | High/Very High    | Very High  |
| **Failure Domain**       | Virtual Server                    | Zone                             | Region/Geo                      | Region/Geo         | Region/Geo        | Region/Geo |
| **RPO/RTO**              | N/A                               | Near zero                        | High                            | Medium             | Low               | Near Zero  |
| **Cost**                 | Low                               | Medium                           | Medium                          | Medium/High        | High              | High       |
| **Complexity**           | Low                               | Medium                           | Low                             | Medium/High        | High              | Very High  |
| **Operational Risk**     | Low                               | Low                              | High                            | Medium             | Low/Medium        | Low        |
{: caption="Table 2. Disaster recovery and availability options" caption-side="bottom"}

1.  Availability depends on number of zones (2 or 3) and app/database HA design

The following table provides recommended DR approaches based on Business Application class and RPO/RTO. This is an example RPO/RTO per application classification which is provided as a reference. Actual RPO/RTO and business classification depends on each organization.

| **Business Application Class** | **RPO**     | **RTO**      | **DR Approach**           |
|--------------------------------|-------------|--------------|---------------------------|
| Platinum (Always on)           | Zero        | Near zero    | Active-Active             |
| Gold (Almost Always On)        | \<= 15 mins | \<= 1 hour   | Active-Standby (Hot DR)   |
| Silver (High Availability)     | \<= 1 hour  | 4 - 8 hours  | Active-Standby (Warm DR)  |
| Bronze (Moderate Availability) | \<= 8 hours | \<= 24 hours | Active-Standby (Warm DR)  |
{: caption="Table 3. Disaster recovery recommendations based on business application class" caption-side="bottom"}

## Disaster Recovery Automation on IBM Cloud
{: #disaster-recovery-automation}

Automating operations is important to enable rapid and consistent recovery processes in response to failures for Cold DR site and Warm DR site Disaster Recovery approaches. Use [IBM Cloud Schematics](https://cloud.ibm.com/schematics/overview) to implement runbooks for recovery processes. Schematics Workspaces provides Terraform-as-a-Service and Schematics Actions provides Ansible-as-a-Service. [Schematics Workspaces](https://cloud.ibm.com/docs/schematics?topic=schematics-sc-workspaces) automates the deployment and management of IBM Cloud infrastructure and services. Schematics Actions automates configuration management and runs scripted day-2 operations. See [Schematics Use Cases](https://cloud.ibm.com/docs/schematics?topic=schematics-how-it-works) for more details.

The following table provides a list of considerations for automating operations to implement Disaster Recovery.

| **Situation**                                             | **Option**                                              | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-----------------------------------------------------------|---------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Restore & create DR resources with images (Cold DR Site)  | Take regular Snapshots                                  | - Use [IBM Cloud Backup for VPC](https://cloud.ibm.com/docs/vpc?topic=vpc-storage-overview#vpc-backup-serv-overview) to schedule regular point-in-time snapshots to back up boot and data volumes.  - The snapshots are stored in regional IBM Cloud Object Storage buckets and are available only in the region where they were created. Create [cross-region snapshot copies](https://cloud.ibm.com/docs/vpc?topic=vpc-snapshots-vpc-about#snapshots_vpc_crossregion_copy) so the snapshots are available for recovery purposes in the target DR region.  - In the event the primary site becomes unavailable, create new instances in the DR site from a boot volume snapshot. Attach data volumes to either a new or existing virtual server instance.  - Note that boot time is increased and performance degraded when provisioning a virtual instance from a bootable snapshot. |
|                                                           | Create a Custom Image                                   | - Create a [custom image from a boot volume](https://cloud.ibm.com/docs/vpc?topic=vpc-image-from-volume-vpc&interface=ui) and use it as the golden image, with preinstalled applications and configurations, to reduce the provisioning time for instances in the DR site. Note that the boot volume must be attached to a stopped Virtual Server Instance (VSI) to create the custom image.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Streamline app recovery (Cold DR and Warm DR sites)       | Use Terraform to provision resources and deploy app     | - Use Terraform to automate the build out or scale out of the DR site on demand.  - Monitor the health of the production site and trigger the automation script to build or scale out the DR site.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                                                           | Use hostnames for Subnets                               | - Subnets are zone-specific and do not extend across zones. New IP addresses are assigned to the new instances, which can break any existing configurations such as security rules, application configuration files. Use hostnames and DNS instead of IP addresses to minimize the number of changes required to redeploy an application in the DR site.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Streamline key recovery (Warm DR Site)                    | Configure Key Management Services for Disaster Recovery | - For Key Protect, configure the service in the primary site with failover in the DR region to enable automatic re-routing of Key Protect requests in the event of a regional service outage. Create scripts to update the Virtual Private Endpoint (VPE) settings to access the Key Protect Service, specifically the Internet Protocol (IP) address, as part of disaster recovery procedures. - For HPCS, configure a failover crypto unit in the DR region. Initialize and configure failover crypto units the same as the operational crypto units before the disaster happens, so they are available in the event of a regional outage.                                                                                                                                                                                                                                           |
{: caption="Table 3. Disaster recovery automation considerations" caption-side="bottom"}
